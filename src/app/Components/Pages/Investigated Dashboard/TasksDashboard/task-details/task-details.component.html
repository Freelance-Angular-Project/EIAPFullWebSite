<div class="container-fluid background1 mb-5">
  <div class="d-flex align-items-center h-50 p-5">

    <h5 class="text-light project-header-title">Task Details</h5>
  </div>
</div>
@if(task){
<main>
  <div class="card">
    <div class="card__title">
      <h3>Task Details</h3>
    </div>
    <div class="card__body">
      <div class="half">
        <div class="featured_text mb-3">
          <h1 class="mb-5">{{task.name}}</h1>
          <p class="price"><span class="text-primary">Details:</span> {{task.details}}</p>
          <p class="price"><span class="text-primary">End Date: </span>{{task.endDate}}</p>
        </div>
      </div>
    </div>

    <div class="card__footer">
      <div class="action">
        <button type="button" (click)="goBack()">Back</button>
      </div>
    </div>
  </div>
</main>
}
@if(TaskNotesLength > 0 )
{
<div class="container">

  <h3>Task Notes</h3>
  <div class="tbl-header">
    <table cellpadding="0" cellspacing="0" class="border-0">
      <thead>
        <tr>
          <th>Details</th>
          <th>Action</th>
        </tr>
      </thead>
    </table>
  </div>
  <div class="tbl-content">
    <table cellpadding="0" cellspacing="0" class="border-0">
      <tbody>
        @for (taskNotes of task.taskNotes; track taskNotes.id) {
        <tr (click)="selectTaskNoteId(taskNotes.id)">
          <td>{{taskNotes.details}}</td>
          <td>
            <button class="btn btn-danger" (click)="openConfirmModal()" title="Delete Task Note"><i
                class="fa-solid fa-trash-can"></i></button>

          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>
</div>
}


@if(TaskFilesLength > 0)
{
<div class="container">
  <h3>Template Files</h3>
  <div class="tbl-header">
    <table cellpadding="0" cellspacing="0" class="border-0">
      <thead>
        <tr>
          <!-- <th>File</th> -->
          <th>Download</th>
          <th>Action</th>
        </tr>
      </thead>
    </table>
  </div>
  <div class="tbl-content">
    <table cellpadding="0" cellspacing="0" class="border-0">
      <tbody>
        @for (file of task.files; track file.id) {
        <tr (click)="selectTaskFileId(file.id)">
          <!-- <td> {{file.url}}
          </td> -->
          <td> <button class="btn btn-primary" (click)="DownloadFile(file.url)" title="Download">Download</button>
          </td>
          <td>
            <button class="btn btn-danger" (click)="openConfirmModal1()" title="Delete Task Note"><i
                class="fa-solid fa-trash-can"></i></button>

          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>
</div>
}



<!-- Bootstrap Modal for Confirmation -->
<div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalLabel">Confirm Deletion</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Are you sure you want to delete this task note?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger" (click)="deleteTaskNote()">Delete</button>
      </div>
    </div>
  </div>
</div>


<!-- Bootstrap Modal for Confirmation -->
<div class="modal fade" id="confirmDeleteModal1" tabindex="-1" aria-labelledby="modalLabel1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalLabel1">Confirm Deletion</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Are you sure you want to delete this task file?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger" (click)="deleteTaskFile()">Delete</button>
      </div>
    </div>
  </div>
</div>
